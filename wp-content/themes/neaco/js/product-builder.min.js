let productConfig={};const componentsOrder=$(".page-builder__product-builder__main-content").data("components-order").split("_");function disableDot(e){$(".pb-heading-"+e).attr("disabled","disabled").addClass("disabled")}function enableDot(e){$(".pb-heading-"+e).removeAttr("disabled").removeClass("disabled")}function initializeDots(){componentsOrder.forEach((e,t)=>{0===t?enableDot(t):disableDot(t)})}function updateDots(){let e=!1;componentsOrder.forEach((t,o)=>{productConfig[t]?enableDot(o):e?disableDot(o):(enableDot(o),e=!0)})}function setCookie(e,t,o,d){var a="";if(o){var i=new Date;i.setTime(i.getTime()+864e5*o),a="; expires="+i.toUTCString()}document.cookie=e+"_"+d+"="+(t||"")+a+"; path=/"}function getCookie(e,t){for(var o=e+"_"+t+"=",d=document.cookie.split(";"),a=0;a<d.length;a++){for(var i=d[a];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(o))return i.substring(o.length,i.length)}return null}function updateProductConfig(e,t){productConfig[e]={selectionCode:t},setCookie("productBuilderConfig",JSON.stringify(productConfig),1,builderInstanceId),updateProductPackStringDisplay()}function updateProductPackStringDisplay(){var e=Object.values(productConfig).map(e=>e.selectionCode).join("_"),t=`${e}.zip`;availablePacks.includes(t)?($("#downloadProductPack a").show().html("Download Your Product Pack<span></span>").attr("href",`/product-packs/${t}`),$("#unavailableNotification").hide()):($("#downloadProductPack a").hide(),$("#unavailableNotification").show().text("You must select a compatible option for each component in order to download.")),$("#packString").text(e||"No options selected")}function handleDependencies(e,t){let o=componentsOrder.indexOf(e)+1;if(o<componentsOrder.length){let d=componentsOrder[o],a=$(".spec-category-thumb[data-component-code='"+e+"'][data-spec-code='"+t+"']").data("compatible"),i=a?a.split(","):[];$(".spec-category-thumb[data-component-code='"+d+"']").each(function(){let e=$(this).data("option-code");i.includes(e)?$(this).closest(".col-4.col-md-6").removeClass("d-none"):$(this).closest(".col-4.col-md-6").addClass("d-none")})}}function reapplyDependencies(){for(let e in productConfig)if(productConfig.hasOwnProperty(e)){let t=productConfig[e].selectionCode;handleDependencies(e,t)}}$(".page-builder__product-builder__slider").on("init",function(e,t){$(".page-builder__product-builder__slider-dots li").each(function(e,t){$(this).find("button").addClass("pb-heading-"+e)}),t.$slides.each(function(e,t){var o=$(this).find(".page-builder__product-builder__component-title").text();$(".pb-heading-"+e).text(o)}),initializeDots()}),$(".spec-category-thumb").click(function(){var e=$(this).data("component-code"),t=$(this).attr("id"),o=$(".spec-display[showdata='"+t+"']");$(".spec-display[data-component-code='"+e+"']").removeClass("show"),o.addClass("show"),$(".spec-add[showdata="+t+"]"),$(o).siblings(".spec-display").children(".spec-add").removeClass("show"),$(".spec-category-thumb[data-component-code='"+e+"']").removeClass("active"),$(this).addClass("active");var d=$("#option-descriptions"),a=$(".page-builder__product-builder__spec-desc[showdata='"+t+"']").outerHeight();d.css("height",a)}),$(".spec-add").click(function(){var e=$(this).attr("showdata"),t=$(this).data("component-code"),o=$(this).data("spec-code");updateProductConfig(t,o),$(".spec-category-thumb[data-component-code='"+t+"']").removeClass("selected"),$(".spec-category-thumb[id='"+e+"']").addClass("selected"),updateDots(),handleDependencies(t,o);let d=componentsOrder.indexOf(t),a=[];componentsOrder.slice(d+1).forEach(e=>{if(productConfig[e]){let t=productConfig[e].selectionCode,o=componentsOrder[d],i=productConfig[o].selectionCode,c=$(".spec-category-thumb[data-component-code='"+o+"'][data-spec-code='"+i+"']").data("compatible"),n=c?c.split(","):[];n.includes(t)||(a.push(e),$(".spec-category-thumb[data-component-code='"+e+"']").removeClass("selected active"),$(".spec-display[data-component-code='"+e+"']").removeClass("show"))}}),updateProductPackStringDisplay(),reapplyDependencies()}),$("#downloadProductPack a").click(function(e){e.preventDefault(),$("#downloadProductPack").data("main-product-code");var t=Object.values(productConfig).map(e=>e.selectionCode).join("_"),o=t?`${t}.zip`:"";if(o){var d=`/product-packs/${o}`;window.location.href=d}else alert("Please select options before downloading your product pack.")}),$(".login-click a").click(function(e){e.preventDefault()}),$(document).ready(function(){updateProductPackStringDisplay()}),$(document).ready(function(){var e=getCookie("productBuilderConfig",builderInstanceId);if(e){productConfig=JSON.parse(e),updateProductPackStringDisplay();var t=JSON.parse(e);$.each(t,function(e,t){var o=t.selectionCode,d=$(".spec-category-thumb[data-component-code='"+e+"'][data-spec-code='"+o+"']");$(d).addClass("selected active");var a=$(".spec-display[data-component-code='"+e+"'][data-spec-code='"+o+"']");$(a).addClass("show")}),reapplyDependencies()}$(".page-builder__product-builder__slider").on("init",function(e,t){$(".page-builder__product-builder__slider-dots li").each(function(e,t){$(this).find("button").addClass("pb-heading pb-heading-"+e)}),t.$slides.each(function(e,t){var o=$(this).find(".page-builder__product-builder__component-title").text();$(".pb-heading-"+e).text(o)})}),$(".page-builder__product-builder__slider").on("init",function(e,t){$("<li/>",{html:'Clear Selection <i class="fa-regular fa-circle-xmark"></i>',id:"clearSelections",class:"clear-btn",click:function(){document.cookie="productBuilderConfig_"+builderInstanceId+"=; Max-Age=-99999999; path=/;",$(".spec-display").removeClass("show"),$(".spec-category-thumb").removeClass("selected active"),productConfig={},$(".page-builder__product-builder__slider").slick("slickGoTo",0),$(".page-builder__product-builder__slider-dots button").attr("disabled",!0),$(".page-builder__product-builder__slider-dots button").addClass("disabled"),$(".page-builder__product-builder__slider-dots button").first().removeAttr("disabled"),$(".page-builder__product-builder__slider-dots button").first().removeClass("disabled"),$("#downloadProductPack a").hide(),$("#unavailableNotification").show().text("You must select a compatible option for each component in order to download.")}}).appendTo(".page-builder__product-builder__slider-dots")}).slick({autoplay:!1,arrows:!1,adaptiveHeight:!0,dots:!0,draggable:!1,appendDots:".page-builder__product-builder__slider-pager",dotsClass:"page-builder__product-builder__slider-dots"}),initializeDots(),updateDots()});